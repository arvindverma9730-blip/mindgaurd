<!DOCTYPE html>
<html>
<head>
  <title>Emotion AI Assistant</title>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.10.0/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
</head>
<body style="text-align:center; font-family:Arial;">
  <h1>Emotion Based Smart Assistant</h1>
  <button onclick="init()">Start Camera</button>
  <div id="webcam-container"></div>
  <h2 id="emotion"></h2>
  <div id="suggestions" style="font-size:20px;"></div>

<script>
  const URL = "./";
  let model, webcam;

  async function init() {
      const modelURL = URL + "model.json";
      const metadataURL = URL + "metadata.json";

      model = await tmImage.load(modelURL, metadataURL);

      webcam = new tmImage.Webcam(300, 300, true);
      await webcam.setup();
      await webcam.play();
      window.requestAnimationFrame(loop);

      document.getElementById("webcam-container").appendChild(webcam.canvas);
  }

  async function loop() {
      webcam.update();
      await predict();
      window.requestAnimationFrame(loop);
  }

  async function predict() {
      const prediction = await model.predict(webcam.canvas);

    // Find highest probability emotion
    let highest = prediction[0];

    for (let i = 1; i < prediction.length; i++) {
        if (prediction[i].probability > highest.probability) {
            highest = prediction[i];
        }
    }

    const emotion = highest.className;

    document.getElementById("emotion").innerText = "Detected: " + emotion;

    showSuggestions(emotion);
}
  function showSuggestions(emotion) {
      let suggestions = "";

      if (emotion === "Angry") {
          suggestions = "üîî You seem stressed!<br>‚Ä¢ Take 5 deep breaths<br>‚Ä¢ Drink water<br>‚Ä¢ Go for short walk";
          alert("You seem Angry! Try calming activities.");
      } 
      else if (emotion === "Sad") {
          suggestions = "üíô You look sad.<br>‚Ä¢ Call a friend<br>‚Ä¢ Listen to music<br>‚Ä¢ Write gratitude journal";
      } 
      else if (emotion === "Happy") {
          suggestions = "üòä You're happy!<br>‚Ä¢ Work on big goals<br>‚Ä¢ Help someone<br>‚Ä¢ Exercise";
      } 
      else {
          suggestions = "üòê Stay balanced.<br>‚Ä¢ Plan your day<br>‚Ä¢ Focus 25 minutes session";
      }

      document.getElementById("suggestions").innerHTML = suggestions;
  }
</script>
</body>
</html>



